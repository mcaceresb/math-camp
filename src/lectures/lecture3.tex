%! TEX program = pdflatex
%% Mauricio Caceres Bravo <mauricio.caceres.bravo@gmail.com>

%----------------------------------------------------------------------
\documentclass{article}

\usepackage[summary]{brownpreamble}
\usepackage{etoc}
\setcounter{tocdepth}{3}

\renewcommand{\subsectionmark}[1]{\markboth{#1}{}}
\renewcommand\sectiontype{Lecture \thesection:\ }
\lhead{\color{light-gray} \itshape Math Camp Aug 18, 2021 -- Lecture \thesection}
\rhead{\color{light-gray} \itshape \thesubsection. \leftmark}
\setcounter{section}{2}
% \renewcommand\SetHideLevel{1pt}

%----------------------------------------------------------------------
\begin{document}
\displayoptions

% ---------------------------------------------------------------------
\section{Compactness, EVT, Correspondences}
\label{sec:compactness_evt_correspondences}

\localtableofcontents

% ---------------------------------------------------------------------
\subsection{Compactness}
\label{sub:compactness}

So I'm gonna say, straight up, that the first time I encountered compactness (way back in undergrad real analysis) it seemed like an inscrutable concept. If you get it right away, then awesome, but if you don't then no worries! It can take a little bit for this to sink in.

\subsubsection{Introduction}
\label{ssub:introduction}

\begin{definition}[cover]\label{def:lecture3_compactness_cover}
  A class $\mathcal{F} = \set{\mathcal{F}_\omega}_{\omega \in \Omega}$ is said to \keyword{cover} a set $S$ if $S \subseteq \cup_{\omega \in \Omega} \mathcal{F}_\omega$. If all members of the class $\mathcal{F}$ are open, we say it is an \keyword{open cover}.
\end{definition}

\begin{definition}[compactness]\label{def:lecture3_compactness_compact}
  A set $S$ is \keyword{compact} if every open cover of $S$ has a \keyword{finite subcover} of $S$.
\end{definition}

Some examples of sets that are and are not compact:
\begin{itemize}[label=$\bullet$]
  \item $S = (0, 1)$ is not compact. $\mathcal{F} = \set{(1/n, 1): n \in \mathbb{N}}$ covers $S$. However, there is no finite sub-cover: Any finite sub-cover gives the interval $(1/N, 1)$; take $z = (1/2N)$ and $z \in (0, 1)$ but $z \notin (1/N, 1)$.

  \item $S = [0, \infty)$ is not compact. $\mathcal{F} = \set{(-1, n): n \in \mathbb{N}}$ covers $S$. However, there is no finite sub-cover: Any finite sub-cover gives the interval $(-1, N)$; take $z = N + 1$ and $z \in [0, \infty)$ but $z \notin (-1, N)$.

  \item $[0, 1]$ \textit{is} compact. Compactness is really trying to get to a notion of ``finiteness,'' and there is a sense in which intervals that are open or not bounded are not finite. Of course, compactness is more general than that, but at least in $\mathbb{R}^N$ we will get a more intuitive definition of compactness.
\end{itemize}

\begin{remark}
  Any finite set $A$ is compact. Take any open cover $\mathcal{F} = \set{\mathcal{F}_\omega}_{\omega \in \Omega}$. For $x \in A$, $x \in \mathcal{F}_\omega$ for some $\omega \in \Omega$ (there may be several, and a single $\mathcal{F}_\omega$ may contain many $x \in A$). Name this $\omega_x$ for each $x$; since $A$ is finite, $\set{\omega_x}_{x \in A}$ is a finite. Hence
  \[
    \mathcal{F}_A = \set{\mathcal{F}_{\omega_x}}_{x \in A}
  \]

  is a finite sub-cover of $A$.
\end{remark}

\begin{figure}[!ht]
  \centering
  \begin{tikzpicture}
    \begin{axis}[name=plot1
      ,title={Infinite Open Cover}
      ,width=9cm
      ,height=8cm
      ,ymin=0
      ,ymax=7
      ,xmin=0
      ,xmax=7
      ,domain=0:7
      %,ylabel=$y$
      %,xlabel=$x$
    ]
    \draw [fill=shadecolor]
      (axis cs:3, 3) circle [radius=1.5]
      node[right] at (axis cs:4.5, 3) {$A$};
    \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=1.5];
    \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=3.0];
    \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=4.5];
    \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=6.0];
    \draw [->, >=latex]
      (axis cs:3.5, 6.05) to[bend right=15] (axis cs:2.8, 5.5)
      node[right] at (axis cs:3.5, 6.05) {$\mathcal{F} = \set{B_n(0)}_{n \in \mathbb{N}}$};
    \end{axis}

    \begin{axis}[name=plot2
      ,title={Finite Open Cover}
      ,at={($(plot1.east) + (3.0cm, 0)$)}
      ,anchor=west
      ,width=9cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0
      ,xmax=6
      ,domain=0:6
      %,ylabel=$y$
      %,xlabel=$x$
    ]
    \draw [fill=shadecolor]
      (axis cs:3, 3) circle [radius=1.5]
      node[above] at (axis cs:4.75, 4.75) {$A$};

    \draw [dashed] (axis cs:3,    3)    circle [radius=1];
    \draw [dashed] (axis cs:3,    4.5)  circle [radius=0.75];
    \draw [dashed] (axis cs:3.5,  4.41) circle [radius=0.75];
    \draw [dashed] (axis cs:4,    4.1)  circle [radius=0.75];
    \draw [dashed] (axis cs:4.5,  3)    circle [radius=0.75];
    \draw [dashed] (axis cs:4,    1.9)  circle [radius=0.75];
    \draw [dashed] (axis cs:3.5,  1.59) circle [radius=0.75];
    \draw [dashed] (axis cs:3,    1.5)  circle [radius=0.75];
    \draw [dashed] (axis cs:2.5,  4.19) circle [radius=0.75];
    \draw [dashed] (axis cs:2,    4.1)  circle [radius=0.75];
    \draw [dashed] (axis cs:1.5,  3)    circle [radius=0.75];
    \draw [dashed] (axis cs:2,    1.9)  circle [radius=0.75];

    \end{axis}
  \end{tikzpicture}
  \caption{Examples of Open Covers in $\mathbb{R}^2$}
  \label{fig:examples_of_open_covers_in_r_2}
\end{figure}

\begin{definition}[sequential compactness]\label{def:lecture3_compactness_sequentially_compact}
  A set $S$ \keyword{sequentially compact} if every sequence in $S$ has a sub-sequence that converges to a point in $S$ ($\forall (x_m) \in S ~~ \exists (x_{m_k})$ s.t. $x_{m_k} \to x \in S$).
\end{definition}

\begin{theorem}\label{thm:lecture3_compactness_iff_sequential_compactness}
  A set $S$ is compact $\iff$ $S$ is sequentially compact.
\end{theorem}

\subsubsection{Heine-Borel and Other Theorems}
\label{ssub:heine_borel_and_other_theorems}

\begin{theorem}[Heine-Borel]\label{thm:lecture3_compactness_heine_borel_modern}
  For any finite $N$, $S \subseteq \mathbb{R}^N$ is compact iff $S$ is closed and bounded.
\end{theorem}

\begin{proof}
  We show that compactness $\implies$ closed and bounded. The converse is a bit more involved. Let $S$ be a compact set; first we show it is bounded. Take
  \[
    \mathcal{F} = \Fset{\mathcal{F}_n = B_n(0)}_{n \in \mathbb{N}}
  \]

  $\mathcal{F}$ is an open cover for $\mathbb{R}^N$, and hence an open cover for $S \subseteq \mathbb{R}^N$. Since $S$ is compact, it admits a finite subcover. Since $\mathcal{F}_n \subseteq \mathcal{F}_{n + 1}$,
  \[
    \bigcup_{n \le N} \mathcal{F}_n = \mathcal{F}_N = B_N(0)
  \]

  But by definition any $x \in B_N(0)$ is s.t. $d(x, 0) < N$. Since $B_N(0)$ is bounded and $S \subseteq B_N(0)$ then $S$ is also bounded. Visually,
  \begin{figure}[H]
    \centering
    \begin{tikzpicture}
      \begin{axis}[name=plot1
        %,title=
        ,width=12cm
        ,height=8cm
        ,ymin=-5
        ,ymax=5
        ,xmin=-5
        ,xmax=5
        ,domain=-5:5
        %,ylabel=$y$
        %,xlabel=$x$
      ]
      \draw [fill=shadecolor]
        (axis cs:2, 2) circle [radius=1]
        node[right] at (axis cs:3, 2.5) {$S$};
      \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=1.5];
      \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=3.0];
      \draw [dashed, opacity=0.75] (axis cs:0, 0) circle [radius=4.5];
      \node[above] at (axis cs:4, -4) {$B_N(0)$};
      \end{axis}
    \end{tikzpicture}
  \end{figure}

  Now we show that it is closed. Take any $x \in S^C = \mathbb{R}^N \setminus S$, the complement of $S$ in $\mathbb{R}^N$. Define the collection
  \[
    \mathcal{F} = \Fset{\mathcal{F}_n = \left(\closure(B_{\frac{1}{n}}(x))\right)^C}_{n \in \mathbb{N}}
  \]

  that is, the \textbf{complement} of the collection of closed balls of radius $\dfrac{1}{n}$ around $x$. A graphical example in $\mathbb{R}^2$:
  \begin{figure}[H]
    \centering
    \begin{tikzpicture}
      \begin{axis}[name=plot1
        %,title=
        ,width=12cm
        ,height=8cm
        ,ymin=-1.5
        ,ymax=5
        ,xmin=-1.95
        ,xmax=5
        ,domain=-5:5
        %,ylabel=$y$
        %,xlabel=$x$
      ]
      \draw [fill=shadecolor]
        (axis cs:2, 2) circle [radius=1]
        node[right] at (axis cs:3, 2.5) {$S$};
      \addplot [only marks, mark=*] coordinates {(0.5, 0.5)};
      \addplot [fill, color=gray, opacity=0.1] coordinates {
        (-2, -2) (-2, 5) (5, 5) (5, -2) (-2, -2)
      };
      \draw [inner color=white,dashed, opacity=0.75] (axis cs:0.5, 0.5) circle [radius=0.9];
      \draw [inner color=white,dashed, opacity=0.75] (axis cs:0.5, 0.5) circle [radius=0.5];
      \draw [inner color=white,dashed, opacity=0.75] (axis cs:0.5, 0.5) circle [radius=0.3];
      \node[right] at (axis cs:0.5, 0.4) {$x$};
      \draw [->, >=latex]
        (axis cs:1.5, 0.5) to[bend right=15] (axis cs:1.1, 0.3)
        node[right] at (axis cs:1.5, 0.4) {$B_{\frac{1}{n}}(x)$};
      \draw [->, >=latex]
        (axis cs:-0.9, 0.9) to[bend left=15] (axis cs:-0.7, 1.5)
        node at (axis cs:-1.15, 0.4) {$\left(\closure(B_{\frac{1}{n}}(x))\right)^C$};
      \end{axis}
    \end{tikzpicture}
  \end{figure}

  Note we need the complements of the \textit{closed} balls because we want the sets in the collection to be open. Now $\closure(B_{\frac{1}{n}}(x)) \to \set{x}$, so
  \[
    \bigcup_{n \in \mathbb{N}} \left(\closure(B_{\frac{1}{n}}(x))\right)^C = \mathbb{R}^N \setminus \set{x}
  \]

  That is, the union of the complements converges to the entire space \textit{except} for $x$. Since $S \subseteq \mathbb{R}^N \setminus \set{x}$ ($S \subseteq \mathbb{R}^N$ and $x \in S^C \implies x \notin S$), then $\mathcal{F}$ is an open cover of $S$. By compactness of $S$, we know that it admits a finite sub-cover. Note
  \[
    B_{\frac{1}{n + 1}}(x) \subseteq B_{\frac{1}{n}}(x)
    \implies
    \left(\closure(B_{\frac{1}{n}}(x))\right)^C \subseteq \left(\closure(B_{\frac{1}{n + 1}}(x))\right)^C
  \]

  Hence any finite union gives
  \[
    \bigcup_{n \le N} \left(B_{\frac{1}{n}}(x)\right)^C =  \left(\closure(B_{\frac{1}{N}}(x))\right)^C
  \]

  Since $S \subseteq \left(\closure(B_{\frac{1}{N}}(x))\right)^C$, it must be that $B_{\frac{1}{N}}(x) \subseteq S^C$. Finally, we can say $\forall x \in S^C ~~ \exists \varepsilon > 0$ (any $\varepsilon < 1/N$) s.t.
  \[
    B_\varepsilon(x) \subseteq S^C
  \]

  which is the definition of an open set. This shows $S^C$ is open, so $S$ is closed. Graphically, we see that at any point $x$ outside of the set we can construct a ball of radius $1 / N_x$ for some $N_x$ that is entirely outside of $S$:
  \begin{figure}[H]
    \centering
    \begin{tikzpicture}
      \begin{axis}[name=plot1
        %,title=
        ,width=12cm
        ,height=8cm
        ,ymin=-1.5
        ,ymax=5
        ,xmin=-1.5
        ,xmax=5
        ,domain=-5:5
        %,ylabel=$y$
        %,xlabel=$x$
      ]
      \draw [fill=shadecolor]
        (axis cs:2, 2) circle [radius=1]
        node[right] at (axis cs:3, 2.5) {$S$};
      \addplot [only marks, mark=*] coordinates {
        (0.5, 0.5)
        (2, 3.25)
      };
      \draw [inner color=white,dashed, opacity=0.75] (axis cs:0.5, 0.5) circle [radius=0.9];
      \draw [inner color=white,dashed, opacity=0.75] (axis cs:2, 3.25) circle [radius=0.15];
      \node[right] at (axis cs:0.5, 0.4) {$x$};
      \node[left] at (axis cs:1.8, 3.25) {$y$};
      \draw [->, >=latex]
        (axis cs:1.5, 0.5) to[bend right=15] (axis cs:1.1, 0.3)
        node[right] at (axis cs:1.5, 0.4) {$B_{\frac{1}{N_x}}(x)$};
      \draw [->, >=latex]
        (axis cs:2.5, 3.6) to[bend right=15] (axis cs:2.15, 3.35)
        node[right] at (axis cs:2.5, 3.5) {$B_{\frac{1}{N_y}}(y)$};
      \end{axis}
    \end{tikzpicture}
  \end{figure}
\end{proof}

The other direction follows from \Cref{thm:lecture3_compactness_heine_borel_og,thm:lecture3_compactness_closed_compact} below. If a set $S$ is bounded in $\mathbb{R}^N$ then it is the subset of some $N$-dimensional cube. Once we show the cube is compact, \Cref{thm:lecture3_compactness_closed_compact} gives that $S$ is compact. For the curious, I sketch the proof here.
\begin{theorem}\label{thm:lecture3_compactness_heine_borel_og}
  $\forall -\infty < a < b < \infty$, the $N$-dimensional cube $[a, b]^N$ is compact.
\end{theorem}

\begin{proof}
  Suppose $-\infty < a < b < \infty$ and let $S = [a, b]^N$ be such that for some open cover $\mathcal{F}$ of $S$ there does not exist a finite sub-cover. Bisect $S$ into $2^N$ equal closed hypercubes with planes parallel to the faces of $S$ (by the way, this is why I call this proof a ``sketch,'' as I have not defined hypercube, plane, parallel, or face). While that sounds fairly complicated, we can visualize it in 3-dimensional space:
  \begin{figure}[H]
    \centering
    \begin{tikzpicture}[scale=1.25]
      % example
      % -------
      \draw [-, line width = 0.75pt]
        (0, 1.5) --
        (2.0, 1.5) --
        (2.5, 2.5) --
        (0.5, 2.5) --
        (0, 1.5)
      ;
      \draw [-, line width = 0.75pt]
        (0, 3.0) --
        (2.0, 3.0) --
        (2.5, 4.0) --
        (0.5, 4.0) --
        (0, 3.0)
      ;
      \draw [-, line width = 0.75pt] (0, 1.5) -- (0, 3.0);
      \draw [-, line width = 0.75pt] (2.0, 1.5) -- (2.0, 3.0);
      \draw [-, line width = 0.75pt] (2.5, 2.5) -- (2.5, 4.0);
      \draw [-, line width = 0.75pt] (0.5, 2.5) -- (0.5, 4.0);

      % cube
      % ----
      \draw [-, dashed]
        (0, 0) --
        (1, 2) --
        (5, 2)
      ;
      \draw [-, dashed]
        (1, 2) --
        (1, 5)
      ;
      \draw [-, dashed]
        (5, 5) --
        (4, 3) --
        (4, 0)
      ;
      \draw [-, dashed]
        (4, 3) --
        (0, 3) --
        (0, 0) --
        (4, 0)
      ;
      \draw [-, dashed]
        (0, 3) --
        (1, 5) --
        (5, 5) --
        (5, 2) --
        (4, 0)
      ;

      % partitions
      % ----------
      \draw [-, dashed, opacity = 0.6]
        (2, 0) --
        (2, 3) --
        (3, 5) --
        (3, 2) --
        (2, 0)
      ;
      \draw [-, dashed, opacity = 0.6]
        (0, 1.5) --
        (4, 1.5) --
        (5, 3.5) --
        (1, 3.5) --
        (0, 1.5)
      ;
      \draw [-, dashed, opacity = 0.6]
        (0.5, 1) --
        (4.5, 1) --
        (4.5, 4) --
        (0.5, 4) --
        (0.5, 1)
      ;

      \draw [-, dashed, opacity = 0.6] (0.5, 2.5) -- (4.5, 2.5);
      \draw [-, dashed, opacity = 0.6] (2.0, 1.5) -- (3.0, 3.5);
      \draw [-, dashed, opacity = 0.6] (2.5, 1.0) -- (2.5, 4.0);
    \end{tikzpicture}
  \end{figure}

  Note that at least one of the hypercubes cannot admit a finite sub-cover (maybe none of them admit a finite sub-cover, but we only need one). Let this cube be $C_1$. We proceed by induction, and now take $C_m$ to be our main cube, and construct $C_{m + 1}$ by partitioning $C_m$ into $2^N$ equal closed cubes where at least one non-empty cube does not admit a finite-sub-cover.
  \begin{enumerate}
    \item $C_m$ are closed.

    \item $C_m$ are non-empty. If at any point all sub-hypercubes of $C_m$ are empty, then $C_m$ itself is empty, a contradiction (since we started with a non-empty hypercube).

    \item $C_{m + 1} \subset C_m$

    \item Let $\delta$ be the maximum distance between any two points in $S$. The maximum distance in $C_m$ is $\dfrac{\delta}{2^m}$.

    \item $C_m$ is not covered by any finite sub-cover of $\mathcal{F}$. Since $\mathcal{F}$ covers $C_m$, if all sub-hypercubes of $C_m$ admit a finite sub-cover, the union of these will be a finite sub-cover of $C_m$, a contradiction.
  \end{enumerate}

  For each $m$, let $x_m$ be any element of $C_m$. This sequence is Cauchy: For any $\varepsilon > 0$,
  \[
    k, l > M > \dfrac{\log(\delta) - \log(\varepsilon)}{\log(2)}
    \implies
    d(x_k, x_l)
    <
    \dfrac{\delta}{2^M}
    <
    \varepsilon
  \]

  Because $\mathbb{R}^N$ is complete, we know that $x_m \to x$ for some $x \in \mathbb{R}^N$. Therefore,\footnote{This uses the fact that each $C_m$ is closed and $x_{m + n} \in C_m$ for all $n$; hence the limit is also in $C_m$.}
  \[
    x \in C_m
    \quad
    \forall m
  \]

  Since $\mathcal{F}$ has an infinite sub-cover of $C_m$ (which might be comprised of all the sets in $\mathcal{F}$), $x \in \mathcal{F}_\omega$ for some set in that infinite sub-cover. $\mathcal{F}_\omega$ is open, so for some $\varepsilon > 0$,
  \[
    d(y, x) < \varepsilon \implies y \in \mathcal{F}_\omega
  \]

  But $x \in C_m$ for any $m$, and the maximum distance between any two points in $C_m$ is $\delta / 2^m$. Hence for $M$ s.t.
  \[
    M > \dfrac{\log(\delta) - \log(\varepsilon)}{\log(2)}
    \implies
    d(x, y) < \varepsilon ~~ \forall y \in C_M
    \implies
    y \in \mathcal{F}_\omega
    \implies
    C_M \subseteq \mathcal{F}_\omega
  \]

  $\set{\mathcal{F}_\omega}$ is a finite sub-cover of $C_M$, a contradiction. Therefore $[a, b]^N$ is compact.
\end{proof}

\begin{theorem}\label{thm:lecture3_compactness_closed_compact}
  Any closed subset of a compact set is compact.
\end{theorem}

\begin{proof}
  $X$ be compact and $S$ be a closed subset of $X$. Let $\mathcal{F}$ be any open cover of $S$ and consider
  \[
    \mathcal{G} = \mathcal{F} \cup \mathbb{R}^N \setminus S
  \]

  Since $S$ is closed, $\mathbb{R}^N \setminus S$ is open. Since $\mathcal{F}$ is an open cover of $S$, $\mathcal{G}$ is therefore an open cover of $S \cup (\mathbb{R}^N \setminus S) = \mathbb{R}^N \supseteq X$. Since $X$ is compact, $\mathcal{G}$ has a finite sub-cover $\set{\mathcal{G}_n: n \in \mathbb{N}, n \le N}$ s.t.
  \[
    S \subseteq X \subseteq \bigcup_{n = 1}^N \mathcal{G}_n
  \]

  The only set in $\mathcal{G}$ that is not in $\mathcal{F}$ is $\mathbb{R}^N \setminus S$, but by definition $S \cancel\subseteq \mathbb{R}^N \setminus S$. Hence $S \subseteq \left(\cup_{n = 1}^N \mathcal{G}_n\right) \setminus \Fset{\mathbb{R}^N \setminus S}$, which means $\set{\mathcal{G}_n: n \in \mathbb{N}, n \le N} \setminus \Fset{\mathbb{R}^N \setminus S} \subseteq \mathcal{F}$ is a finite sub-cover of $S$.
\end{proof}

\subsubsection{Weierstrass Extreme Value Theorem (EVT)}
\label{ssub:weierstrass_extreme_value_theorem_evt_}

\begin{theorem}
  Let $S \subseteq \mathbb{R}$ with $S \ne \varnothing$ be a compact set; then $S$ has a minimum and a maximum.
\end{theorem}

\begin{proof}
  Since $S$ is compact, it is closed and bounded. Since it is bounded, $\sup S$ exists. Suppose $\sup S \notin S$.  Since $S$ is closed, we can find some $\varepsilon > 0$ s.t. $B_\varepsilon(\sup S) \cap S = \varnothing$. However, any such $y \in B_\varepsilon(\sup S)$ has the property that
  \[
    \sup S - \varepsilon < y < \sup S + \varepsilon
  \]

  Further, we know that $x \in S \implies x \notin B_{\varepsilon}(\sup S)$. Hence
  \[
    x < \sup S - \varepsilon < y < \sup S < \sup S + \varepsilon
  \]

  for every $x \in S$ and some $y \in B_{\varepsilon}(\sup S)$, which means that $y$ is an upper bound for $S$ that is smaller than $\sup S$, a contradiction. Thus $\max S = \sup S$; the proof for $\min S = \inf S$ is analogous.
\end{proof}

\begin{theorem}
  Let $f: S \to T$ be a continuous function. If $S$ is compact, then $f(S)$ is compact.
\end{theorem}

\begin{proof}
  Take any open cover of $f(S)$:
  \begin{align*}
    \mathcal{F}
    =
    \set{\mathcal{F}_\omega: \omega \in \Omega}
    \quad
    \text{with}
    \quad
    f(S)
    \subseteq
    \bigcup_{\omega \in \Omega}
    \mathcal{F}_\omega
  \end{align*}

  Consider the inverse-image of each set in the open cover:
  \begin{align*}
    f^{-1}(\mathcal{F})
    =
    \set{f^{-1}(\mathcal{F}_\omega): \omega \in \Omega}
  \end{align*}

  For each $s \in S$, we know $f(s) \in f(S)$, and in turn for each $f(s) \in S$ there is some $\omega$ s.t. $f(s) \in \mathcal{F}_\omega$, which implies $s \in f^{-1}(\mathcal{F}_\omega)$. In other words $f^{-1}(\mathcal{F})$ covers $S$. Since $f$ is continuous, we know the pre-image of open sets is open, meaning this is an open cover. Since $S$ is compact, it admits a finite sub-cover:
  \begin{align*}
    \mathcal{G}
    =
    \set{f^{-1}(\mathcal{F}_{\omega_i}): i = 1, \ldots, N}
    \quad
    \text{with}
    \quad
    S
    \subseteq
    \bigcup_{i = 1}^N
    f^{-1}(\mathcal{F}_{\omega_i})
  \end{align*}

  The image of a finite union of sets is just the union of their individual images. Hence
  \begin{align*}
    f(S)
    \subseteq
    f\left(
      \bigcup_{i = 1}^N
      f^{-1}(\mathcal{F}_{\omega_i})
    \right)
    =
    \bigcup_{i = 1}^N
    f\left(
      f^{-1}(\mathcal{F}_{\omega_i})
    \right)
    =
    \bigcup_{i = 1}^N
    \mathcal{F}_{\omega_i} \cap f(S)
    \subseteq
    \bigcup_{i = 1}^N
    \mathcal{F}_{\omega_i}
  \end{align*}

  $\mathcal{F}$ was arbitrary and we found a finite sub-cover $\set{\mathcal{F}_{\omega_i}: i = 1, \ldots, N}$. By definition $f(S)$ is compact. (We remark that we need to write $\mathcal{F}_{\omega_i} \cap f(S)$ because the image of the pre-image of an arbitrary set need not be the set itself! Even if, in this case, we know the pre-image is non-empty, there is no reason why every element in the set will map to an element in $S$ or even in $S$. For example, let $f(x) = x$ with $S = (0, 3)$. Note $f([1, 2]) = [1, 2] \subseteq (0, 4)$, but $f(f^{-1}((0, 4))) = f((0, 3)) = (0, 3) \ne (0, 4)$.)
\end{proof}

\begin{theorem}[Weierstrass' EVT]\label{thm:lecture3_continuity_weierstrass_evt}
  If $S$ is a compact set $\varphi: S \to \mathbb{R}$ is continuous then $\exists x, y$ s.t. $\varphi(x) = \sup \varphi(S)$ and $\varphi(y) = \inf \varphi(S)$.
\end{theorem}

\begin{proof}
  The \keyword{EVT} follows directly from other theorems in this section. Since $S$ is compact and $\varphi$ continuous, $\varphi(S)$ is compact. Since $\varphi(S) \subseteq \mathbb{R}$ is compact, it has a minimum and a maximum.
\end{proof}

\paragraph{Application to Economics}
\label{par:application_to_economics}

Consider a standard utility maximization problem
\[
  \max_{x \in B(p, w)} u(x)
\]

with $B(p, w) = \set{x: p \cdot x \le w}$ and $x, p \in \mathbb{R}^N_+$. $B(p, w)$ is closed and bounded, so if $u(x)$ is continuous the maximum exist and the problem has a solution at somee $x^* \in B(p, w)$.

\subsubsection{Using Sequential Definitions}
\label{ssub:using_sequential_definitions}

The idea here is to show examples of how to construct sequences in a way that helps when doing proofs. We saw these proofs already without using sequences; however, we we have seen that various definitions often have a sequential version, so let us see how they might help.
\begin{enumerate}
  \item Let us show if $f: S \to T$ is continuous function, then $S$ is compact implies $f(S)$ compact.
    \begin{proof}
      \begin{itemize}[label=$\bullet$]
        \item Take any sequence $y_m \in f(S)$; we know $\forall m ~~ \exists x_m \in S$ s.t. $f(x_m) = y_m$.

        \item $S$ is compact, so it is sequentially compact; that is, $\exists x_{m_k} \to x$ for some $x \in S$.

        \item $f$ is continuous, so $y_{m_k} = f(x_{m_k}) \to f(x) \in f(S)$. Let $y \equiv f(x)$.

        \item Hence $\forall y_m \in f(S) ~~ \exists y_{m_k} \to y$ for some $y \in S$.
      \end{itemize}

      By definition, $f(S)$ is sequentially compact, which means it is compact.
    \end{proof}

  \item Let us show \nameref{thm:lecture3_continuity_weierstrass_evt}:
    \begin{proof}
      \begin{itemize}[label=$\bullet$]
        \item Since $S$ is compact and $\varphi$ is continuous, $\varphi(S)$ is compact.

        \item $\varphi(S)$ is compact, so it is closed and bounded.

        \item $\varphi(S)$ bounded means $-\infty < \inf \varphi(S) \le \sup \varphi(S) < \infty$.

        \item By definition of $\sup \varphi(S)$, $\forall \varepsilon_m = 1/m ~~ \exists z_m \in \varphi(S)$ s.t. $\sup \varphi(S) - \varepsilon < z_m \le \sup \varphi(S)$ (if not, then $\sup \varphi(S) - \varepsilon$ would be the $\sup$, contradiction). Note $z_m \to \sup \varphi(S)$.

        \item $\varphi(S)$ closed means it has all its limits, so $\sup \varphi(S) \in \varphi(S)$. Hence $\exists x \in S$ s.t. $x = \sup \varphi(S)$.

        \item For the $\inf$, construct a sequence $z_m \in \varphi(S)$ s.t. $\inf \varphi(S) \le z_m < \inf \varphi(S) + \varepsilon$. $z_m \to \inf \varphi(S)$ so $\inf \varphi(S) \in \varphi(S)$, and $\exists y \in S$ s.t. $\varphi(y) = \inf \varphi(S)$.
      \end{itemize}

      Therefore $\varphi$ attains its $\sup$ and its $\inf$.
    \end{proof}
\end{enumerate}

\subsubsection{Review}
\label{ssub:review}

I think focusing on the \textit{properties} of compactness can be more important than all the proofs above. Further, since we'll typically work with the reals, I think the intuition of compactness as equivalent to closed and bounded is fine (certainly for this course).
\begin{table}[H]
  \centering
  \caption{Compactness! What is it good for? Actually quite a bit.}
  \begin{tabular}{ll}
  \toprule
  \multicolumn{2}{l}{\itshape $S$ is compact:}  \\\midrule
  Definition       & For any \keyword{open cover} there exists a \keyword{finite sub-cover}. \\
                   & \hspace{1.5em} {\footnotesize $\forall \mathcal{O} = \Fset{O_{\omega}: \omega \in \Omega}$ open cover $\exists W \subseteq \Omega$ s.t. $W$ finite and $S = \bigcup_{\omega \in W} O_{\omega}$} \\
  Characterization & $\iff$ \keyword{sequentially compact}: Any sequence has a convergent subsequence. \\
                   & \hspace{1.5em} {\footnotesize $\forall (x_m) \in S ~~ \exists x \in S$ and $(x_{m_k})$ s.t. $x_{m_k} \to x$.} \\
  Implications     & $\implies S$ is \keyword{closed and bounded}. \\
                   & $\implies$ any \keyword{closed subset} of $S$ is compact. \\
                   & $\implies$ $f(S)$ is compact for any continuous $f$. \\
                   & $\implies$ $f(S)$ has a $\min$ and a $\max$ for any continuous $f$ (\keyword{EVT}). \\
  Heine-Borel      & \textbf{\textit{In Euclidean space only}} ($\mathbb{R}^N$): $\iff$ $S$ is \keyword{closed and bounded}.  \\
  \bottomrule
  \end{tabular}
\end{table}

\begin{itemize}[label=$\bullet$]
  \item If $S$ is compact, then I can construct an \textbf{\textit{arbitrary collection of open sets}} that contains $S$, and I know I will get \textbf{\textit{something finite}} out of it.

  \item If $S$ is compact, then I can construct an \textbf{\textit{arbitrary sequence}} in $S$, and I know I will get something \textbf{\textit{convergent}} out of it.
\end{itemize}

Finally, I wanted to make a note about why continuity is additionally required to get maxima and minima. It's easiest to visualize with real functions: Consider $f(x) = 1/x$ if $x \ne 0$ and $f(x) = 0$ if  $x = 0$. This is not continuous, and does not have a min or a max on, say, $[-1, 1]$, which is a compact set. Visually:
\begin{figure}[!ht]
  \centering
  \begin{tikzpicture}
    \begin{axis}[name=plot1
      %,title=
      ,width=12cm
      ,height=8cm
      ,ymin=-3
      ,ymax=3
      ,xmin=-2
      ,xmax=2
      ,domain=-3:3
      ,ylabel=$f(x)$
      ,xlabel=$x$
    ]
    \addplot [smooth, samples = 300] {1/x};
    \addplot [only marks, mark=*] coordinates {(0, 0)};
    \draw [-, line width = 1.25pt]
      (axis cs:-1, -0.5) --
      (axis cs:-1.085, -0.5) --
      (axis cs:-1.085, 0.5) --
      (axis cs:-1, 0.5)
    ;
    \draw [-, line width = 1.25pt]
      (axis cs:1, -0.5) --
      (axis cs:1.085, -0.5) --
      (axis cs:1.085, 0.5) --
      (axis cs:1, 0.5)
    ;
    \node[above] at (axis cs:-1, 0.5) {$-1$};
    \node[above] at (axis cs:1, 0.5) {$1$};
    \end{axis}
  \end{tikzpicture}
\end{figure}

The set is compact, but the function diverges to $\infty$ as it approaches $0$ from the right, and to $-\infty$ as it approaches $0$ from the left.

% ---------------------------------------------------------------------
\subsection{Correspondences}
\label{sub:correspondences}

\subsubsection{``Set-Valued Functions''}
\label{ssub:_set_valued_functions_}

A correspondence, denoted $\Gamma: X \toto Y$, assigns a non-empty subset of $Y$ to each point in $X$. In a sense, a correspondence is a ``set-valued function'' with ``input'' $x \in X$ and ``output'' is $\Gamma(x) \subseteq Y$.\footnote{Conversely, functions are ``singleton-valued correspondences,'' where $f(x)$ is equivalent to the correspondence $\Gamma(x) = \set{f(x)}$.} Some terminology is completely analogous relative to when we were working with functions:
\begin{itemize}[label=$\bullet$]
  \item $X$ is the \keyword{domain} and $Y$ is the \keyword{co-domain}.

  \item $\forall S \subseteq X$ let $\Gamma(S) \equiv \bigcup\set{\Gamma(x): x \in S}$ is the \keyword{image} of $S$.

  \item $\Gamma(X)$ is the range, and if $\Gamma(X) = Y$ we say $\Gamma$ is \keyword{surjective}.
\end{itemize}

Here's the first roadblock: What would it mean for a correspondence to be \textit{injective}? For functions, we want to capture the idea of \textit{one-to-one}. A correspondence, however, starts from the premise that a mapping can be one to many. Is there an analogous idea that we \textit{should} try to capture? We leave this question unanswered as an example of why we need to be specially careful when dealing with correspondences.
\begin{example}
  If $\Gamma(X) \subseteq X$ then we say it's a ``self-correspondence.'' An example of such a correspondence is the choice correspondence from utility maximization.
  \begin{align*}
    \argmax_{\mathbb{R}^N_+} u(x)
    \quad
    \text{s.t.}
    \quad
    p \cdot x \le w
  \end{align*}

  We can go a step further and also define the problem over correspondences. Let
  \begin{align*}
    \Gamma(p, w)
    =
    \Fset{x \in \mathbb{R}^+: p \cdot x \le w}
  \end{align*}

  be the budget correspondence. Then we can define the $\argmax$ correspondence as
  \begin{align*}
    \argmax u(x)
    \quad
    \text{s.t.}
    \quad
    x \in \Gamma(p, w)
  \end{align*}

  Why go through the trouble? The idea is that if we can prove enough theorems and properties of correspondences, re-expressing some problems we're familiar with in terms of correspondences might make how to solve them and what their properties are more transparent.
\end{example}

\begin{remark}
  Since correspondences map points to sets, it is typical to refer to correspondences as [property]-valued, where [property] is any property of a set. For example, they can be closed-valued, compact-valued, convex-valued, and so on.
\end{remark}

\subsubsection{Inverse Images}
\label{ssub:inverse_images}

With functions we had a nice characterizations of continuity: $f^{-1}$ the inverse image maps open sets to open sets. What is the analogue for $\Gamma^{-1}$?
\begin{itemize}[label=$\bullet$]
  \item $f^{-1}(O) = \set{x \in X: \set{f(x)} \subseteq O}$.

  \item $f^{-1}(O) = \set{x \in X: \set{f(x)} \cap O \ne \varnothing}$.
\end{itemize}

These are analogous for functions, but for correspondences it defines two distinct sets, the \textit{upper} inverse image and the \textit{lower} inverse image, which will give rise to two different notions of continuity:
\begin{definition}
  Given a correspondence $\Gamma: X \toto Y$
  \begin{itemize}[label=$\bullet$]
    \item $\Gamma^{-1}(O) \equiv \set{x \in X: \Gamma(x) \subseteq O}$ is the \keyword{upper inverse image}.

    \item $\Gamma_{-1}(O) \equiv \set{x \in X: \Gamma(x) \cap O \ne \varnothing}$ is the \keyword{lower inverse image}.
  \end{itemize}
\end{definition}

Note that $\Gamma(x) \ne \varnothing$ and $\Gamma(x) \subseteq O \implies \Gamma(x) \cap O \ne \varnothing$. So necessarily $\Gamma^{-1}(O) \subseteq \Gamma_{-1}(O)$.

\begin{figure}[!ht]
  \centering
  \caption{Visualizing the Upper and Lower Inverse Image}
  \label{fig:visualizing_the_upper_and_lower_inverse_image}
  \begin{tikzpicture}
    \begin{axis}[name=plot1
      %,title=
      ,width=12cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0
      ,xmax=6
      ,domain=0:6
      ,ylabel=$\Gamma(x)$
      ,xlabel=$x$
    ]
    \addplot [line width = 1pt, smooth, name path = A, domain=0.5:5] {0.15 * (x - 3)^2 + 3.75};
    \addplot [line width = 1pt, smooth, name path = B, domain=0.5:5] {-0.15 * (x - 3)^2 + 2.25};
    \addplot [line width = 1pt, smooth, domain=0:0.5] {5};
    \addplot [line width = 1pt, smooth, domain=0:0.5] {1};
    \addplot[color = shadecolor, opacity = 0.75] fill between[of =A and B];

    % points
    \addplot [only marks, mark=*] coordinates {
      (1.7125, 2)
      (4.275, 2)
    };
    \draw [-, dashed] (axis cs:0.5, 1.3125) -- (axis cs:0.5, 0);
    \draw [-, dashed] (axis cs:1.7125, 2) -- (axis cs:1.7125, 0);
    \draw [-, dashed] (axis cs:4.275, 2) -- (axis cs:4.275, 0);
    \draw [-, dashed] (axis cs:5, 1.65) -- (axis cs:5, 0);
    \node[right] at (axis cs:0.5, 0.25) {$x_0$};
    \node[right] at (axis cs:1.7125, 0.25) {$x_1$};
    \node[right] at (axis cs:4.275, 0.25) {$x_2$};
    \node[right] at (axis cs:5, 0.25) {$x_3$};

    % set O
    \addplot [smooth, dashed, domain=0:5.5] {2};
    \addplot [smooth, dashed, domain=0:5.5] {4};
    \draw [
      decorate,
      decoration={brace, amplitude=6pt},
      xshift=0pt,
      yshift=0pt,
      line width=0.5pt
    ]
    (axis cs:5.5, 4) -- (axis cs:5.5, 2)
    node[right] at (axis cs:5.6, 3) {$O$};
    \end{axis}
  \end{tikzpicture}
\end{figure}

In the image above, \textit{every} point $x \in [x_0, x_3]$ is s.t. $\Gamma(x) \cap O \ne \varnothing$, so $\Gamma_{-1}(O) = [x_0, x_3]$; however, not every point is s.t. $\Gamma(x) \subseteq O$. In this case, only points $y \in (x_1, x_2)$ are s.t. $\Gamma(y) \subseteq O$, so $\Gamma^{-1}(O) = (x_1, x_2)$. Last, if $z \in [0, x_0)$ then $\Gamma(z)$ is neither contained in nor intersects with $0$.

\subsubsection{Hemicontinuity}
\label{ssub:hemicontinuity}

We present two distinct definitions of continuity. If we use the \textit{upper} inverse image:
\begin{definition}[uhc]\label{def:lecture3_correspondences_uhc_upper_inverse_image}
  $\Gamma: X \toto Y$ is \keyword{upper hemi-continuous} (uhc) if whenever $O \subseteq Y$ is open, $\Gamma^{-1}(O)$ is also open.
\end{definition}

If $\Gamma(x) \subseteq O$ then $x \in \Gamma^{-1}(O)$; if $\Gamma^{-1}(O)$ is open $\exists \delta > 0$ s.t. $B_{\delta}(x) \subseteq \Gamma^{-1}(O)$, so $\Gamma(B_{\delta}(x)) \subseteq O$. Therefore we have the following equivalent definition of uhc.

\begin{definition}[uhc]\label{def:lecture3_correspondences_uhc_delta}
  $\Gamma: X \toto Y$ is uhc iff $~~\forall O \subseteq Y$ open with $\Gamma(x) \subseteq O ~~ \exists \delta > 0$ s.t. $\Gamma(B_{\delta}(x)) \subseteq O$.
\end{definition}

We can similarly define continuity in terms of the \textit{lower} inverse image instead:
\begin{definition}[lhc]\label{def:lecture3_correspondences_lhc_lower_inverse_image}
  $\Gamma: X \toto Y$ is \keyword{lower hemi-continuous} (lhc) if whenever $O \subseteq Y$ is open, $\Gamma_{-1}(O)$ is also open.
\end{definition}

If $\Gamma(x) \cap O \ne \varnothing$ then $x \in \Gamma_{-1}(O)$; if $\Gamma_{-1}(O)$ is open $\exists \delta > 0$ s.t. $B_{\delta}(x) \subseteq \Gamma_{-1}(O)$, so $z \in B_{\delta}(x) \implies \Gamma(z) \cap O \ne \varnothing$. Therefore we can equivalently write the following definition:
\begin{definition}[lhc]\label{def:lecture3_correspondences_lhc_delta}
  $\Gamma: X \toto Y$ is lhc iff $~~\forall O \subseteq Y$ open with $\Gamma(x) \cap O \ne \varnothing ~~ \exists \delta > 0$ s.t. $\Gamma(z) \cap O \ne \varnothing ~~ \forall z \in B_{\delta}(x)$.
\end{definition}

\begin{itemize}[label=$\bullet$]
  \item Intuitively, if $\Gamma$ is uhc at $x$ and $z$ is ``close'' to $x$, every point in $\Gamma(z)$ will be ``close'' to some point in $\Gamma(x)$.

    If there is some neighborhood around $x$ s.t. every open set \textit{containing} $\Gamma(x)$ also contains $\Gamma(z)$ for $z$ in the neighborhood, then nothing in $\Gamma(z)$ can be suddenly ``far'' from the all values of $x$.

  \item By contrast, if $\Gamma$ is lhc at $x$ and $z$ ``close'' to $x$, each point in $\Gamma(x)$ will be ``close'' to some point in $\Gamma(z)$.

    Intersections, unlike containment, can happen at \textit{any} point. Hence lhc \textit{does not} require every point in $\Gamma(z)$ to always be close to $\Gamma(x)$; rather, it requires \textit{every} point in $\Gamma(x)$ to be close to \textit{some} point in $\Gamma(z)$.
\end{itemize}

We will formalize the intuition above when we discuss the sequential definition of uhc and lhc.
\begin{figure}[!ht]
  \centering
  \caption{Upper and Lower Hemicontinuity (Inverse Images)}
  \label{fig:upper_and_lower_hemicontinuity_images}
  \begin{tikzpicture}
    \begin{axis}[name=plot1
      ,title={Lower but not upper hemicontinuous}
      ,width=9cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0.5
      ,xmax=6.5
      ,domain=0:6
      ,ylabel=$\Gamma(x)$
      ,xlabel=$x$
    ]
      \draw [name path = A, -, smooth]
        (axis cs:2, 5) to[bend left=15]
        (axis cs:5, 4) to[bend right=15]
        (axis cs:5.5, 3);
      \draw [name path = B, -, smooth]
        (axis cs:2, 1) to[bend right=15]
        (axis cs:5, 1) to[bend left=15]
        (axis cs:5.5, 2.5);
      \addplot[color=shadecolor] fill between[of=A and B];
      \addplot [smooth, domain=1:2] {3};
      \addplot [only marks, mark=*, color=white] coordinates {
        (2, 5)
        (2, 1.5)
        (2, 1)
      };
      \addplot [only marks, mark=o] coordinates {
        (2, 5)
        (2, 1.5)
        (2, 1)
      };

      % points
      \addplot [only marks, mark=*] coordinates {
        (2, 3)
      };
      \node[above] at (axis cs:1.8, 3.1) {$y_1$};
      \node[above] at (axis cs:1.9, 1.5) {$y_2$};
      \node[above] at (axis cs:1, 0.05) {$x_0$};
      \node[above] at (axis cs:2, 0.05) {$x_1$};
      \node[above] at (axis cs:5.5, 0.05) {$x_2$};

      % containing set
      \draw [
        decorate,
        decoration={brace, amplitude=9pt},
        xshift=0pt,
        yshift=0pt,
        line width=0.5pt
      ]
      (axis cs:2, 3.75) -- (axis cs:2, 2.25)
      node[right] at (axis cs:2.25, 3) {$O$};
    \end{axis}

    \begin{axis}[name=plot2
      ,title={Upper but not lower hemicontinuous}
      ,at={($(plot1.east) + (0.5cm, 0)$)}
      ,anchor=west
      ,width=9cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0.5
      ,xmax=7
      ,domain=0:6
      ,ylabel=$\Gamma(x)$
      ,xlabel=$x$
    ]
      \draw [name path = A, -, smooth]
        (axis cs:3, 5) to[bend left=15]
        (axis cs:6, 4) to[bend right=15]
        (axis cs:6.5, 3);
      \draw [name path = B, -, smooth]
        (axis cs:3, 1) to[bend right=15]
        (axis cs:6, 1) to[bend left=15]
        (axis cs:6.5, 2.5);
      \addplot[color=shadecolor] fill between[of=A and B];
      \draw [-]
        (axis cs:3, 5) --
        (axis cs:3, 1);
      \addplot [smooth, domain=1.5:3] {2.5};

      % points
      \addplot [only marks, mark=*] coordinates {
        (3, 2.5)
        (3, 4)
      };
      \node[above] at (axis cs:2.8, 2.6) {$y_1$};
      \node[above] at (axis cs:2.8, 4.1) {$y_2$};
      \node[above] at (axis cs:1.5, 0.05) {$x_0$};
      \node[above] at (axis cs:3, 0.05) {$x_1$};
      \node[above] at (axis cs:6.5, 0.05) {$x_2$};

      % intersecting set
      \draw [
        decorate,
        decoration={brace, amplitude=9pt},
        xshift=0pt,
        yshift=0pt,
        line width=0.5pt
      ]
      (axis cs:3, 3) -- (axis cs:3, 2)
      node[right] at (axis cs:3.25, 2.5) {$O_1$};

      \draw [
        decorate,
        decoration={brace, amplitude=9pt},
        xshift=0pt,
        yshift=0pt,
        line width=0.5pt
      ]
      (axis cs:3, 4.5) -- (axis cs:3, 3.5)
      node[right] at (axis cs:3.25, 4) {$O_2$};

      \draw [
        decorate,
        decoration={brace, amplitude=9pt},
        xshift=0pt,
        yshift=0pt,
        line width=0.5pt
      ]
      (axis cs:1.5, 1) -- (axis cs:1.5, 5)
      node[left] at (axis cs:1.25, 3) {$O_3$};
      \draw [-, dashed] (axis cs:1.5, 1) -- (axis cs:3, 1);
      \draw [-, dashed] (axis cs:1.5, 5) -- (axis cs:3, 5);
    \end{axis}
  \end{tikzpicture}
\end{figure}

Let $\Gamma: [x_0, x_2] \toto \mathbb{R}$ be as depicted above:
\begin{itemize}[label=$\bullet$]
  \item In the left figure, $\Gamma(x_1) = y_1 \subseteq O$; however, no matter how small the $\delta$ $y_2 \in \Gamma(x_1 + \delta) \notin O$, meaning the set values of points near $x_1$ always have elements far away from $\Gamma(x_1)$. Hence it cannot be uhc. Formally, $\Gamma^{-1}(O) = [x_0, x_1]$, which is not open.

    But it is lhc: The set values of every point near $x_1$ will intersect $O$, and generally every set intersecting $\Gamma(x_1)$. Formally, for any such set $\Gamma_{-1}(O) = [x_0, x_2]$ (note $X = [x_0, x_2]$, and $X$ is open relative to $X$).

  \item In the right figure, $y_1 \in \Gamma(x_1) \cap O_1 \ne \varnothing$, and every point around $x_1$ will also intersect $O_1$. \textit{However}, $y_2 \in \Gamma(x_1) \cap O_2 \ne \varnothing$, but no matter how small the $\delta$, $\Gamma(x_1 - \delta) \cap O_2 = \varnothing$, meaning not every element in $\Gamma(x_1)$ is near the set-values of points near $x_1$. Formally, $\Gamma_{-1}(O_2) = [x_1, x_2]$, which is not open in $[x_0, x_2]$.

    But it is uhc: $O_3$, and generally any set containning all of $x_1$, will also contain the set value of every point around $x_1$. Formally, $\Gamma^{-1}(O_3)$, or any such set, is $[x_0, x_2]$, the space itself, which is open.
\end{itemize}

\subsubsection{Sequential Characterization of Hemicontinuity}
\label{ssub:sequential_characterization_of_hemicontinuity}

\begin{remark}
  It not uncommon to encounter the sequential characterizations as the definition (in fact the very first time I learned what a correspondence was, I only encountered the sequential characterization of hemicontinuity).
  % I think the reason is that the set-based definition runs into having to define what openness and such.
\end{remark}

\begin{theorem}\label{thm:lecture3_compactness_uhc_sequential}
  $\Gamma: X \toto Y$. If $~~\forall (x_m) \in X, (y_m) \in Y$ s.t. $x_m \to x, y_m \in \Gamma(x_m) ~~ \exists y_{m_k} \to y$ for some $y \in \Gamma(x)$, then $\Gamma$ is uhc at $x$. If $\Gamma$ is compact-valued, the converse is also true.
\end{theorem}

Some remarks:
\begin{itemize}[label=$\bullet$]
  \item The definition says that for every sequence converging to $x$ and every sequence in the set-values of $x_m$, $y_m \in \Gamma(x_m)$, there is a convergent sub-sequence to an element $y \in \Gamma(x)$.

    Recall our intuition for uhc: Every point in $\Gamma(z)$, for $z$ sufficiently ``close'' to $x$, is also ``close'' to \textit{some} point of $\Gamma(x)$. This closely mirrors the sequential definition: If every time we get arbitrarily close to $x$ (that is, $x_m \to x$) \textit{every} point in those set values (arbitrary $y_m \in \Gamma(x_m)$) will be arbitrarily close to \textit{some} point in $\Gamma(x)$ (there is some sub-sequence $y_{m_k} \to y \in \Gamma(x)$, which means that \textit{every} sequence in $\Gamma(x_m)$ has infinitely many points near \textit{some} value of $\Gamma(x)$).

  \item So why doesn't the converse hold? The above sequential definition requires the function to be uhc, but uhc correspondences don't have to be closed \textit{or} bounded:
    \begin{figure}[!ht]
      \centering
      \caption{}
      \label{fig:}
      \begin{tikzpicture}
        \begin{axis}[name=plot1
          ,title={$\Gamma(x) = (1, 2)$ on $\mathbb{R}_{++}$}
          ,width=9cm
          ,height=8cm
          ,ymin=0
          ,ymax=3
          ,xmin=0
          ,xmax=2.5
          ,domain=0:2
          ,ylabel=$\Gamma(x)$
          ,xlabel=$x$
        ]
        \addplot [dashed, name path = A] {1};
        \addplot [dashed, name path = B] {2};
        \addplot[color = shadecolor] fill between[of = A and B];
        \end{axis}

        \begin{axis}[name=plot2
          ,title={$\Gamma(x) = [0, 1/x]$ on $\mathbb{R}_{++}$ and $\Gamma(0) = \mathbb{R}_+$}
          ,at={($(plot1.east) + (0.5cm, 0)$)}
          ,anchor=west
          ,width=9cm
          ,height=8cm
          ,ymin=0
          ,ymax=6
          ,xmin=0
          ,xmax=1.5
          ,domain=0.2:1
          ,ylabel=$\Gamma(x)$
          ,xlabel=$x$
        ]
        \addplot [smooth, name path = A] {1/x};
        \addplot [smooth, name path = B] {0};
        \draw [-, name path = C] (axis cs:0, 0) -- (axis cs:0, 5);
        \draw [-, name path = D, opacity = 0] (axis cs:0.2, 0) -- (axis cs:0.2, 5);
        \addplot[color = shadecolor] fill between[of = C and D];
        \addplot[color = shadecolor] fill between[of = A and B];
        \end{axis}
      \end{tikzpicture}
    \end{figure}

    \begin{itemize}[label=$\circ$]
      \item The figure on the left is uhc: Since the function is constant, if $\Gamma(x) \subseteq O$ for any $O$, then $\Gamma(y) = \Gamma(x) \subseteq O$ for every $y \in (0, \infty)$. Thus $\Gamma^{-1}(O) = \mathbb{R}_{++}$. However, for $1/n \to 0$ and $1 + 1/n \in \Gamma(1/n)$, $1 + 1/n \to 1 \notin \Gamma(0) = (1, 2)$.

      \item The figure on the right is also uhc: Take any open $O \subset \mathbb{R}_+$ s.t. $\Gamma(x) \subseteq O$ and we have $\Gamma^{-1}(O) = (x, \infty)$. Last, if $\Gamma(0) \subseteq O \subseteq \mathbb{R}$ then $O = \mathbb{R}_+$, and $\Gamma^{-1}(\mathbb{R}_+) = [0, 1] = X$  (and, again, $X$ is open relative to itself). However, take $1/n \to 0$ and $n \in \Gamma(1/n)$; $n \to \infty \notin \mathbb{R}_+$.
    \end{itemize}

  \item Therefore uhc is not enough to guarantee that a sequence always exists. More precisely, it's not so much that we need the set-values of $\Gamma$ to be closed and bounded: We need them to be compact, and that will guarantee the existence of a sub-sequence. (Recall here the link between compactness and sequential compactness, which we will use in our proof to guarantee the existence of a convergent sub-sequence; being closed and bounded, however, is only equivalent to compactness in Euclidean space. The latter is nice for exposition but the actual technical requirement is compactness.)
\end{itemize}

\begin{theorem}\label{thm:lecture3_compactness_lhc_sequential}
  $\Gamma: X \toto Y$ is lhc at $x \in X \iff \forall (x_m) \in X$ s.t. $x_m \to x \in X$ and $\forall y \in \Gamma(x) ~~ \exists (y_m) \in Y$ s.t. $y_m \to y$ and $y_m \in \Gamma(x_m)$.
\end{theorem}

Given both sequential definitions of uhc and lhc, we repeat our intuition:
\begin{enumerate}
  \item If $\Gamma$ is uhc at $x$ then every point $y \in \Gamma(z)$, for $z$ arbitrarily close to $x$, is itself close to some point in $\Gamma(x)$.  The limit definition follows this closely: As $x_m \to x$, every sequence $y_m \in \Gamma(x_m)$ will have inifinitely many elements arbitrarily close to \textit{some} point in $\Gamma(x)$, so there will be \textit{some} sub-sequence $y_{m_k} \to y \in \Gamma(x)$ (with the caveat that $\Gamma$ is compact-valued).

  \item If $\Gamma$ is lhc at $x$ and $z$ is arbitrarily close to $x$, then every point $y \in \Gamma(x)$ must be arbitrarily close to \textit{some} point in $\Gamma(z)$.  Again, the limit definition follows this: As $x_m \to x$, every point $y \in \Gamma(x)$ will be arbitrarily close to \textit{some} point in $\Gamma(x_m)$, so there will exist a sequence $y_m \in \Gamma(x_m)$ s.t. $y_m \to y$.
\end{enumerate}

\begin{figure}[H]
  \centering
  \caption{Upper and Lower Hemicontinuity (Sequences)}
  \label{fig:upper_and_lower_hemicontinuity_sequences}
  \begin{tikzpicture}
    \begin{axis}[name=plot1
      ,title={Lower but not upper hemicontinuous}
      ,width=9cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0.5
      ,xmax=6.5
      ,domain=0:6
      %,ylabel=$y$
      %,xlabel=$x$
    ]
    \draw [name path = A, -, smooth]
      (axis cs:2, 5) to[bend left=15]
      (axis cs:5, 4) to[bend right=15]
      (axis cs:5.5, 3);
    \draw [name path = B, -, smooth]
      (axis cs:2, 1) to[bend right=15]
      (axis cs:5, 1) to[bend left=15]
      (axis cs:5.5, 2.5);
    \addplot[color=shadecolor] fill between[of=A and B];
    \addplot [smooth, domain=1:2] {3};
    \addplot [only marks, mark=*, color=white] coordinates {
      (2, 5)
      (2, 1.5)
      (2, 1)
    };
    \addplot [only marks, mark=o] coordinates {
      (2, 5)
      (2, 1.5)
      (2, 1)
    };
    % points
    \addplot [only marks, mark=*] coordinates {
      (2, 3)
    };
    \node[above] at (axis cs:1.8, 3.1) {$y_1$};
    \node[above] at (axis cs:1.9, 1.5) {$y_2$};
    \node[above] at (axis cs:2, 0.05) {$x$};
    \draw [->, >=latex, dashed]
      (axis cs:4, 2.5) to[bend left=15] (axis cs:2.1, 1.5)
      node[above] at (axis cs:4, 2.5) {$y_n$};
    \draw [->, >=latex]
      (axis cs:3, 0.25) -- (axis cs:2.2, 0.25)
      node[above] at (axis cs:3.25, 0.01) {$x_n^+$};
    \draw [->, >=latex]
      (axis cs:1, 0.25) -- (axis cs:1.8, 0.25)
      node[above] at (axis cs:0.8, 0.01) {$x_n^-$};
    \end{axis}

    \begin{axis}[name=plot2
      ,title={Upper but not lower hemicontinuous}
      ,at={($(plot1.east) + (0.5cm, 0)$)}
      ,anchor=west
      ,width=9cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0.5
      ,xmax=6.5
      ,domain=0:6
      %,ylabel=$y$
      %,xlabel=$x$
    ]
    \draw [name path = A, -, smooth]
      (axis cs:3, 5) to[bend left=15]
      (axis cs:6, 4) to[bend right=15]
      (axis cs:6.5, 3);
    \draw [name path = B, -, smooth]
      (axis cs:3, 1) to[bend right=15]
      (axis cs:6, 1) to[bend left=15]
      (axis cs:6.5, 2.5);
    \addplot[color=shadecolor] fill between[of=A and B];
    \draw [-]
      (axis cs:3, 5) --
      (axis cs:3, 1);
    \addplot [smooth, domain=1:3] {3};
    % points
    \addplot [only marks, mark=*] coordinates {
      (3, 3)
      (3, 4)
    };
    \node[above] at (axis cs:2.8, 3.1) {$y_1$};
    \node[above] at (axis cs:2.8, 4.1) {$y_2$};
    \node[above] at (axis cs:3, 0.05) {$x$};
    \draw [dashed, ->, >=latex]
      (axis cs:1, 2.95) -- (axis cs:2.95, 2.95)
      node[below] at (axis cs:1, 2.9) {$y_n$};
    \draw [->, >=latex]
      (axis cs:4, 0.25) -- (axis cs:3.2, 0.25)
      node[above] at (axis cs:4.25, 0.01) {$x_n^+$};
    \draw [->, >=latex]
      (axis cs:2, 0.25) -- (axis cs:2.8, 0.25)
      node[above] at (axis cs:1.8, 0.01) {$x_n^-$};
    % \draw [->, >=latex, dashed]
    %   (axis cs:5, 3) to[bend right=15] (axis cs:3.1, 4);
    % \draw [->, >=latex, dashed]
    %   (axis cs:5, 2.5) to[bend left=15] (axis cs:3.1, 1.5)
    %   node[above] at (axis cs:5, 2.5) {$y_n$};
    \end{axis}
  \end{tikzpicture}
\end{figure}

\subsubsection{Closed Graph}
\label{ssub:closed_graph}

\begin{definition}[graph]\label{def:lecture3_correspondences_graph}
  The \keyword{graph} of a correspondence $\Gamma: X \toto Y$, denoted $Gr(\Gamma)$, is
  \begin{align*}
    Gr(\Gamma)
    \equiv
    \Fset{
      (x, y) \in X \times Y: y \in \Gamma(x)
    }
  \end{align*}
\end{definition}

$\Gamma$ has a closed graph if \ldots its graph is closed.
\begin{definition}[closed graph]\label{def:correspondences_closed_graph}
  $\Gamma$ is \keyword{closed} at $x \in X$ if $\forall (x_m) \in X^\infty, (y_m) \in Y^\infty$ s.t. $x_m \to x \in X, y_m \to y \in Y$, and $y_m \in \Gamma(x_m)$ we also have $y \in \Gamma(x)$. $\Gamma$ has a \keyword{closed graph} if it is closed at every $x \in X$.
\end{definition}

\begin{figure}[H]
  \centering
  \caption{Not Closed Graph}
  \label{fig:not_closed_graph}
  \begin{tikzpicture}
    \begin{axis}[name=plot1
      %,title=
      ,width=12cm
      ,height=8cm
      ,ymin=0
      ,ymax=6
      ,xmin=0
      ,xmax=6
      ,domain=0:6
      ,ylabel=$\Gamma(x)$
      ,xlabel=$x$
    ]
    \draw [-, name path = A] (axis cs:0, 4) to[bend right=15] (axis cs:3, 4);
    \draw [-, name path = B] (axis cs:0, 1.5) to[bend right=15] (axis cs:3, 1.5);
    \draw [-, name path = C] (axis cs:3, 5) to[bend left=15] (axis cs:5, 5);
    \draw [-, name path = D] (axis cs:3, 3) to[bend left=15] (axis cs:5, 3);
    \draw [-] (axis cs:3, 4) -- (axis cs:3, 3) ;

    \addplot[color = shadecolor] fill between[of = A and B];
    \addplot[color = shadecolor] fill between[of = C and D];

    \draw [->, >=latex] (axis cs:2, 2) -- (axis cs:2.95, 2);
    \node[left] at (axis cs:2, 2) {$y_m$};
    \node[right] at (axis cs:3, 2) {$y \notin \Gamma(x)$};
    \addplot [only marks, mark=*] coordinates {(3, 2)};

    \draw [-, dashed] (axis cs:3, 5) -- (axis cs:3, 0);
    \draw [->, >=latex] (axis cs:2, 0.2) -- (axis cs:2.95, 0.2);
    \node[left] at (axis cs:2, 0.2) {$x_m$};
    \node[right] at (axis cs:3, 0.2) {$x$};
    \end{axis}
  \end{tikzpicture}
\end{figure}

The idea is that \textit{every} series in $\Gamma(x_m)$ that converges will converge to a point in $\Gamma(x)$ (if $x_m \to x$).
\begin{remark}
  Closed graph is \keyword{not} the same as closed-valued!

  The example in \Cref{fig:not_closed_graph} above is closed-valued but not closed graph, so the former need not imply the latter. Further, a closed graph is not the same as uhc: A uhc correspondence doesn't have to be closed-valued, which would mean that it would not have a closed graph (if $\Gamma(x)$ is not closed-valued, then there is some sequence in $\Gamma(x)$ that converges to a point outside of $\Gamma(x)$, contradicting the definition of closed graph).

  Conversely, a correspondence can have a closed graph with a discontinuity. $\Gamma(x) = \set{1/x}$ if $x > 0$ and $\Gamma(x) = \set{0}$ if $x = 0$. Note that any sequence in $\Gamma(x)$ as $x \to 0^+$ will diverge, so there is no contradiction of the closed graph property. However, there is clearly a discontinuity at $0$.
\end{remark}

We can, however, say that closed graph, closed-valued, and uhc are related:
\begin{claim}
  \begin{enumerate}
    \item If $\Gamma: X \toto Y$ has a closed graph and $Y$ is compact then $\Gamma$ is uhc.

    \item If $\Gamma$ is uhc and closed-valued then it has a closed-graph.
  \end{enumerate}
\end{claim}

\clearpage
\printindex

% ---------------------------------------------------------------------
\end{document}
